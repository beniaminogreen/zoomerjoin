<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="zoomerjoin">
<title>A Zoomerjoin Guided Tour • zoomerjoin</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A Zoomerjoin Guided Tour">
<meta property="og:description" content="zoomerjoin">
<meta property="og:image" content="https://beniaminogreen.github.io/zoomerjoin/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">zoomerjoin</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/benchmarks.html">Benchmarks</a>
    <a class="dropdown-item" href="../articles/guided_tour.html">A Zoomerjoin Guided Tour</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/beniaminogreen/zoomerjoin/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>A Zoomerjoin Guided Tour</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/beniaminogreen/zoomerjoin/blob/HEAD/vignettes/guided_tour.Rmd" class="external-link"><code>vignettes/guided_tour.Rmd</code></a></small>
      <div class="d-none name"><code>guided_tour.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="introduction">Introduction:<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h3>
<p>This vignette gives a basic overview of the core functionality of the
zoomerjoin package. Zoomerjoin empowers you to fuzzily-match datasets
with millions of rows in seconds, while staying light on memory usage.
This makes it feasible to perform fuzzy-joins on datasets in the
hundreds of millions of observations in a matter of minutes.</p>
<p>As an added feature, the package also provides a wrapper for fast
2-dimensional spatial joins using the rust <code>kdtree</code>
crate.</p>
</div>
<div class="section level2">
<h2 id="how-does-it-work">How Does it Work?<a class="anchor" aria-label="anchor" href="#how-does-it-work"></a>
</h2>
<p>Zoomerjoin’s blazingly fast joins are made possible by an optimized,
performant implimentation of the <a href="https://en.wikipedia.org/wiki/MinHash" class="external-link">MinHash</a> algorithm
written in Rust.</p>
<p>While most conventional joining packages compare the all pairs of
records in the two datasets you wish to join, the MinHash algorithm
manages to compare only similar records to each other. This results in
matches that are orders of magnitudes faster than other matching
software packages: <code>zoomerjoin</code> takes hours or minutes to
join datasets that would have taken centuries to join using other
matching methods.</p>
</div>
<div class="section level2">
<h2 id="basic-syntax">Basic Syntax:<a class="anchor" aria-label="anchor" href="#basic-syntax"></a>
</h2>
<p>If you’re familiar with the logical-join syntax from
<code>dplyr</code>, then you already know how to use fuzzy join to join
two datasets. Zoomerjoin provides <code>jaccard_inner_join</code> and
<code>jaccard_full_join</code> (among others), which are the
fuzzy-joining analogues of the corresponding dplyr functions.</p>
<p>I demonstrate the syntax by using the package to join to corpuses,
which formed from entries from the <a href="https://data.stanford.edu/dime" class="external-link">Database on Ideology, Money in
Politics, and Elections (DIME)</a> (Bonica 2016).</p>
<p>The first corpus looks as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corpus_1</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 500,000 × 2</span></span></span>
<span><span class="co">##        a field                                                                  </span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                                  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>     1 ufwa cope committee                                                    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span>     2 committee to re elect charles e. bennett                               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>     3 montana democratic party non federal account                           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>     4 mississippi power &amp; light company management political action and educ…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span>     5 napus pac for postmasters                                              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span>     6 aminoil good government fund                                           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span>     7 national women's political caucus of california                        </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span>     8 minnesota gun owners' political victory fund                           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>     9 metropolitan detroit afl cio cope committee                            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span>    10 carpenters legislative improvement committee united brotherhood of car…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 499,990 more rows</span></span></span></code></pre>
<p>And the second looks as follows:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">corpus_2</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 500,000 × 2</span></span></span>
<span><span class="co">##         b field                               </span></span>
<span><span class="co">##     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> <span style="text-decoration: underline;">832</span>471 avrp studios inc                    </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">832</span>472 avrd design                         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> <span style="text-decoration: underline;">832</span>473 avenales cattle co                  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">832</span>474 auto dealers of michigan political a</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">832</span>475 atty &amp; counselor at law             </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">832</span>476 at&amp;t united way                     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">832</span>477 ashland food &amp; liquors              </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">832</span>478 arvance turkey ranch inc            </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">832</span>479 arizona federation of teachers      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">832</span>480 arianas restaurant                  </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 499,990 more rows</span></span></span></code></pre>
<p>The two Corpuses can’t be directly joined because of misspellings.
This means we must use the fuzzy-matching capabilities of
zoomerjoin:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">start_time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">join_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/jaccard_inner_join.html">jaccard_inner_join</a></span><span class="op">(</span><span class="va">corpus_1</span>, <span class="va">corpus_2</span>,</span>
<span>                           by <span class="op">=</span> <span class="st">"field"</span>, n_gram_width<span class="op">=</span><span class="fl">6</span>,</span>
<span>                           n_bands<span class="op">=</span><span class="fl">20</span>, band_width<span class="op">=</span><span class="fl">6</span>, threshold <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="va">start_time</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Time difference of 33.5616 secs</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">join_out</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 48,081 × 4</span></span></span>
<span><span class="co">##         a field.x                                                      b field.y</span></span>
<span><span class="co">##     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">90</span>621 b w pac of el paso                                      9.91<span style="color: #949494;">e</span>5 b w pa…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">450</span>392 stagner &amp; associates                                    8.67<span style="color: #949494;">e</span>5 wagner…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">73</span>607 plumbing heating &amp; cooling contractors assoc.           9.41<span style="color: #949494;">e</span>5 plumbi…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">45</span>885 law offices of guerra &amp; farah pllc                      8.34<span style="color: #949494;">e</span>5 law of…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">141</span>898 lake houston shores republican women                    9.55<span style="color: #949494;">e</span>5 lake h…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">480</span>586 rick schwartz &amp; associates                              1.23<span style="color: #949494;">e</span>6 patric…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">314</span>695 maryland association of insurance &amp; financial advisors  1.07<span style="color: #949494;">e</span>6 mo ass…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">134</span>617 ayres cluster curry mccall collins &amp; fuller p           1.08<span style="color: #949494;">e</span>6 ayres …</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span>  <span style="text-decoration: underline;">68</span>852 international brotherhood of electrical workers local … 8.80<span style="color: #949494;">e</span>5 intern…</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">251</span>202 jh enterprises                                          1.06<span style="color: #949494;">e</span>6 th ent…</span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 48,071 more rows</span></span></span></code></pre>
<p>Below, I provide a short description of the arguments.</p>
<p>The first two arguments, <code>a</code>, and <code>b</code>, are
direct analogues of the <code>dplyr</code> arguments, and are the two
data frames you want to join. The <code>by</code> field also acts the
same as it does in ‘dplyr’ (it provides the function the columns you
want to match on).</p>
<p>The <code>n_gram_width</code> parameter determines how wide the
n-grams that are used in the similarity evaluation should be, while the
<code>threshold</code> argument determines how similar a pair of strings
has to be (in Jaccard similarity) to be considered a match. Users of the
<code>stringdist</code> or <code>fuzzyjoin</code> package will be
familiar with both of these arguments, but should bear in mind that
those packages measure <em>string distance</em> (where a distance of 0
indicates complete similarity), while this package operates on
<em>string similarity,</em> so a threshold of .8 will keep matches above
80% Jaccard similarity.</p>
<p>The <code>n_bands</code> and <code>band_width</code> parameters
govern the performance of the LSH. The default parameters should perform
well for medium-size (n &lt; 10^7) datasets where matches are somewhat
similar (similarity &gt; .8), but may require tuning in other settings.
the <code>jaccard_hyper_grid_search</code> function can help select
these parameters for you given the properties of the LSH you desire.</p>
<p>For more details, the <code>textreuse</code> package has an excellent
vignette, and zoomerjoin provides a re-implimentation of its profiling
tools, <code>jaccard_probability,</code> and
<code>jaccard_bandwidth</code> (although the implementations differ
slightly as the hyperparameters in each package are different).</p>
<div class="section level3">
<h3 id="references">References:<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<p>Bonica, Adam. 2016. Database on Ideology, Money in Politics, and
Elections: Public version 2.0 [Computer file]. Stanford, CA: Stanford
University Libraries.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Beniamino Green.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
